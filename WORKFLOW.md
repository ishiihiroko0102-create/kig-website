# KIG Website - Claude Code 効率的ワークフロー

**作成日**: 2026年2月20日
**目的**: トークン節約しつつ効率的に Web サイト構築を進める戦略

---

## 1. フェーズ分割戦略（セッション単位）

### Phase 1: デザイン・戦略 ✅ **完了**
- 目的: デザイン決定、カラーパレット、UI/UX 仕様確定
- セッション数: 1
- 成果物: `DESIGN_STRATEGY.md`, `mds-complete.astro`
- トークン使用: 適正（初期のため多めでも OK）

### Phase 2: コンテンツ・ページ設計 🔄 **次**
- 目的: 採用・ニュース・各ページの詳細構成、フォーム仕様
- セッション数: 1-2
- 推奨: 1セッション（情報量が多いなら分割）
- 成果物: `CONTENT_STRUCTURE.md`, ページ設計書
- トークン効率: 情報集約的だが、必要なら使う

### Phase 3: ページ実装 🔄 **その次**
- 目的: 各ページの Astro コンポーネント実装
- セッション数: 3-5 分割
  - Session 3a: Recruit ページ
  - Session 3b: About + Business ページ
  - Session 3c: News + Contact ページ
  - Session 3d: Forms + API 連携
  - Session 3e: テスト・最適化
- トークン効率: **フェーズ分割で効率化**

### Phase 4: テスト・ローンチ 🔄
- 目的: E2E テスト、パフォーマンス、デプロイ
- セッション数: 2
- 成果物: テストレポート、デプロイ手順

---

## 2. 各セッションの最適な起動方法

### 📌 セッション開始時のテンプレート

**毎回、セッション冒頭で以下を実行:**

```bash
# 1. 現在のコンテキストを確認
cat /Users/hirokoishii/.claude/WORKFLOW.md    # このファイル
cat DESIGN_STRATEGY.md                         # 戦略ドキュメント
cat SPEC.md                                    # プロジェクト仕様

# 2. 前回の成果物を確認
git log --oneline -10                          # 最新コミット

# 3. 必要なファイルだけをメモリに
ls -la src/pages/concepts/
ls -la src/pages/
```

### 📝 セッション開始時のプロンプト例

```
KIG Website - [Phase] セッション開始

**前提:**
- プロジェクト: KIG コーポレートサイトリニューアル
- デザイン: MDSFund 風（決定済み）
- スタック: Astro + Tailwind

**今回のフェーズ:** [フェーズ名]
**目標:** [具体的な目標]
**期待成果物:** [ファイル名]

**参照ファイル:**
- DESIGN_STRATEGY.md
- SPEC.md
- src/pages/concepts/mds-complete.astro

**進め方:**
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

トークン効率: 情報集約的に進める
```

---

## 3. トークン効率を最大化する方法

### ✅ DO - トークンを効率的に使う

#### A. 情報集約的なプロンプト
```
❌ 長い説明のプロンプト → トークン無駄
✅ 構造化された短いプロンプト → トークン効率
```

**例：**
```
❌ 「採用ページを作ってほしいです。営業スタッフ、倉庫物流、データ入力の3職種があります。
給与は...で、待遇は...で、...」

✅ 「採用ページ実装

参照: DESIGN_STRATEGY.md (セクション 4. コンテンツ構成)

実装: src/pages/recruit/index.astro
- レイアウト: mds-complete の Grid Cards パターン
- 職種カード: 3種類（SPEC.md 参照）
- ボタン: Primary「応募する」
- レスポンシブ: 375px, 768px, 1440px テスト

進め方: 先に型定義 → カード実装 → ボタン連携」
```

#### B. CLAUDE.md で指示を永続化
```markdown
# KIG Website - グローバル指示

## プロジェクト定数
- スタック: Astro + Tailwind CSS
- デザイン: MDS Fund 風
- 色: #0066cc (Blue), #FFFFFF (White)
- フォント: Inter, Open Sans

## 実装ルール
- コンポーネント: 400行以下
- ホバーエフェクト: 0.2s ease
- レスポンシブ: mobile-first
- アニメーション: fadeIn (0.8s)

## ファイル構成
- Design: src/pages/concepts/mds-complete.astro
- Strategy: DESIGN_STRATEGY.md
- Colors: src/styles/global.css (--accent-blue など)

## エージェント指示
- code-reviewer: 常に実行（コード記述後）
- security-reviewer: フォーム・API 実装時
- e2e-runner: 実装完了時
```

### ❌ DON'T - トークンを無駄にしない

```
❌ 1. 同じ質問を繰り返す
   → ドキュメント化して参照する

❌ 2. 長い会話履歴を引きずる
   → セッション分割 + ファイル記録

❌ 3. 複数タスクを1セッションで
   → Phase ごとに分割

❌ 4. 不必要なコンテキスト
   → 必要な情報だけを参照
```

---

## 4. セッションタイプ別の最適な進め方

### 🎨 セッションタイプA: 設計・戦略（情報集約型）

**トークン使用戦略**: 必要に応じて使う（1-2 時間）

```
1. 要件整理: 30分
   - ドキュメント読み込み
   - 質問の構造化

2. 設計フェーズ: 1時間
   - 複数案検討
   - エージェント活用（planner, architect）

3. ドキュメント化: 30分
   - Markdown で記録
   - 次セッションで参照可能に
```

### 💻 セッションタイプB: 実装（タスク指向型）

**トークン使用戦略**: 効率重視（1-2 時間、15-30分短セッション推奨）

```
1. タスク定義: 5分
   - 目標: 1 ページ実装
   - ファイル: 1-2 個

2. 実装: 40分
   - code-reviewer で品質管理
   - エージェント並列実行

3. テスト・調整: 15分
   - レスポンシブ確認
   - ホバーエフェクト検証
```

### 🧪 セッションタイプC: テスト・デバッグ（問題解決型）

**トークン使用戦略**: 集中的に使う（30-45分短集中）

```
1. 問題の特定: 10分
   - エラーログ確認
   - 原因仮説

2. 解決: 20分
   - fix 実装
   - 複数案検討（必要なら）

3. 検証: 10分
   - テスト実行
   - 完全動作確認
```

---

## 5. 並列実行で効率化

### ✅ 複数エージェントの並列実行

```
セッション内で並列実行可能:

1. code-reviewer    → コード品質チェック
2. security-reviewer → セキュリティチェック
3. e2e-runner      → テスト実行

例: 実装完了後
$ claude code /run /code-reviewer /security-reviewer /e2e-runner
```

### ✅ 複数セッション並列実行

同時に複数セッション起動（推奨）:

```
Terminal 1: Phase 3a - Recruit ページ実装
Terminal 2: コード レビュー・テスト実行

メイン処理が終わったら、次フェーズへ
```

---

## 6. トークン節約のチェックリスト

### 計画段階
- [ ] DESIGN_STRATEGY.md で情報集約
- [ ] ページごとのタスク分割
- [ ] セッション分割計画

### セッション開始時
- [ ] 参照ファイルを明記
- [ ] 目標を1-2個に絞る
- [ ] 不要な会話履歴は削除

### 実装中
- [ ] 短いプロンプト（300トークン以下）
- [ ] 並列エージェント活用
- [ ] 決定事項は即ドキュメント化

### セッション終了時
- [ ] 成果物をコミット
- [ ] 次セッションの指示書作成
- [ ] トークン使用量を記録

---

## 7. セッション管理テンプレート

### セッション記録ファイル

```markdown
# セッション記録 - Phase 3a: Recruit ページ

**日付**: 2026-02-20
**目標**: 採用情報ページ実装
**成果**: src/pages/recruit/index.astro 作成

## トークン使用量
- 開始時: ~50K
- 実装中: ~80K
- 終了時: ~130K
- **総使用**: 130K トークン

## 実装内容
- [ ] Hero セクション
- [ ] 職種カード (3 個)
- [ ] 待遇情報
- [ ] 応募フォーム

## 次セッションへ
- [ ] フォーム バックエンド連携（Phase 3d）
- [ ] メール送信機能実装
```

---

## 8. 推奨ワークフロー（全体）

```
Week 1:
Session 1a (設計・戦略) → DESIGN_STRATEGY.md 完成 ✅
                          ↓
Session 2a (コンテンツ)   → CONTENT_STRUCTURE.md 作成
                          ↓
Week 2:
Session 3a (Recruit)      → recruit/index.astro
Session 3b (About/Biz)    → about/index.astro, business/index.astro
Session 3c (News)         → news/index.astro
                          ↓
Week 3:
Session 3d (Forms)        → API 連携、フォーム実装
Session 3e (Test)         → E2E テスト、パフォーマンス最適化
                          ↓
Week 4:
Session 4 (Deployment)    → テスト環境デプロイ、本番準備
```

---

## 9. 重要なポイント

### ✅ トークン効率が高い
- セッション分割
- 情報ドキュメント化
- 短いプロンプト
- 並列実行

### ✅ 必要なときに十分使う
- 設計・戦略段階
- 複雑な問題解決時
- セキュリティ・テスト確認時

### ✅ チームとの連携も効率的
- DESIGN_STRATEGY.md で方針共有
- 各セッションでコミット → Git 履歴
- 次セッションで参照可能

---

## 10. このワークフローの開始方法

### 次セッション開始時

```bash
# 1. このファイルを読み込む
cat .claude/WORKFLOW.md

# 2. 次フェーズを確認
# → Phase 2: コンテンツ・ページ設計

# 3. プロンプト例
"
KIG Website - Phase 2: コンテンツ・ページ設計

参照:
- DESIGN_STRATEGY.md
- SPEC.md
- .claude/WORKFLOW.md

目標:
1. 採用ページの詳細構成確定
2. ニュース・イベント機能設計
3. 各ページのコンテンツ構造設計

成果物: CONTENT_STRUCTURE.md

進め方:
- DESIGN_STRATEGY.md のチェックリスト確認
- 不明な点をクリア
- 実装計画確定
"
```

---

**このワークフローで、トークン効率 + チーム協働 + 品質を全て実現できます！** 🚀
